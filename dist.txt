#!/usr/bin/env python3
from gpiozero import DistanceSensor, DigitalInputDevice
from time import sleep

# HC-SR04: echo pin first, trigger pin second
ultra = DistanceSensor(echo=24, trigger=23, max_distance=4.0)
# IR obstacle sensor: active low (0 = obstacle)
ir = DigitalInputDevice(17, pull_up=True)  # treat low as active

while True:
    distance_cm = ultra.distance * 100.0  # meters â†’ cm
    ir_blocked = (ir.value == 0)          # True if obstacle

    if ir_blocked or distance_cm < 20.0:
        print(f"OBSTACLE: {distance_cm:.1f} cm, IR={ir_blocked}")
    else:
        print(f"CLEAR: {distance_cm:.1f} cm")
    sleep(0.5)
